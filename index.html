<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>MapEdit</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.css" />
    <link rel="stylesheet" href="css/ge.css" />
</head>
<style>
    #map {
        width: 960px;
        height: 500px;
    }

    svg {
        position: relative;
    }

    path {
        visibility: hidden;
        /*fill: #000;*/
        /*fill-opacity: .2;*/
        /*stroke: #fff;*/
        /*stroke-width: 1.5px;*/
    }

    /*path:hover {*/
        /*fill: brown;*/
        /*fill-opacity: .7;*/
    /*}*/

</style>
<body>
<form>
    <label class="mode-radio-labels"><input type="radio" name="mode" value="explore" checked> Explore</label>
    <label class="mode-radio-labels"><input type="radio" name="mode" value="draw"> Draw</label>
    <label class="mode-radio-labels"><input type="radio" name="mode" value="edit"> Edit</label>
    <label class="mode-radio-labels"><input type="radio" name="mode" value="delete"> Delete</label>
</form>
<div id="map">

</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.5/leaflet.js"></script>
<script src="lib/underscore.min.js"></script>
<script src="src/Graph.js"></script>
<script src="src/GraphEdit.js"></script>
<script>
    // D3 + Leaflet: http://bost.ocks.org/mike/leaflet/
    var map = new L.Map("map", {center: [38.8054, -77.1676], zoom: 12})
            .addLayer(new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"));
    var graph = new Graph(_),
            v0 = graph.addVertex(0, -77.1676, 38.8054),
            v1 = graph.addVertex(1, -77.1665, 38.9719),
            v2 = graph.addVertex(2, -77.0584, 38.9724),
            v3 = graph.addVertex(3, -76.9478, 38.9700),
            v4 = graph.addVertex(4, -76.9499, 38.8896),
            v5 = graph.addVertex(5, -76.9513, 38.8084),
            e0 = graph.addEdge(0, v0, v1),
            e1 = graph.addEdge(1, v1, v2),
            e2 = graph.addEdge(2, v2, v3);
            e3 = graph.addEdge(3, v3, v4);
            e4 = graph.addEdge(4, v4, v5);

    var graphEdit = new GraphEdit(d3, _, map, graph);



//    var svg = d3.select(map.getPanes().overlayPane).append("svg"),
//            g = svg.append("g").attr("class", "leaflet-zoom-hide");

//    var collection = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[0,90],[-360,90],[-360,-90],[0,-90],[0,90]]]}}]};
//    var transform = d3.geo.transform({point: projectPoint}),
//        path = d3.geo.path().projection(transform);
//
//    var feature = g.selectAll("path")
//            .data(collection.features)
//            .enter().append("path");
//
//    var circle = g.selectAll("circle")
//            .data([[-77.036548, 38.897729]])
//            .enter().append("circle")
//            .on("mouseover", function (d) {
//                d3.select(this).classed("active", true);
//            })
//            .on("mouseout", function () {
//                d3.select(this).classed("active", false);
//            });
//
//
//    map.on("viewreset", reset);
//    reset();
//
//    // Reposition the SVG to cover the features.
//    function reset() {
//        var bounds = path.bounds(collection),
//                topLeft = bounds[0],
//                bottomRight = bounds[1];
//
//        svg .attr("width", bottomRight[0] - topLeft[0])
//                .attr("height", bottomRight[1] - topLeft[1])
//                .style("left", topLeft[0] + "px")
//                .style("top", topLeft[1] + "px");
//
//        g   .attr("transform", "translate(" + -topLeft[0] + "," + -topLeft[1] + ")");
//
//        feature.attr("d", path);
//        circle.attr("cx", function (d) {
//            var point = map.latLngToLayerPoint(new L.LatLng(d[1], d[0]));
//            return point.x;
//        })
//                .attr("cy", function (d) {
//                    var point = map.latLngToLayerPoint(new L.LatLng(d[1], d[0]));
//                    return point.y;
//                })
//                .attr("r", 5);
//    }
//
//    // Use Leaflet to implement a D3 geometric transformation.
//    function projectPoint(x, y) {
//        var point = map.latLngToLayerPoint(new L.LatLng(y, x));
//        this.stream.point(point.x, point.y);
//    }
</script>
</html>
